<!DOCTYPE html>
<html lang="ko" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>DarkPan - Bootstrap 5 Admin Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
    <style>
        body{
            width: 1800px;
        }

        .mine{
        font : 100 10px/1 "Open Sans", sans-serif;
        line-height: 0;
        margin : 0px;
        padding: 0px;
     
      }

        #sea{
            margin: 0;
            padding: 0;
            font-weight: 0;
            font-size: 0px;
            line-height: 0px;
            box-sizing: initial;
            background-image: url(./image/바다사진.png);
            background-repeat: no-repeat;
            background-size: 100% 100%;
            color:white;
            position: relative;
            overflow: hidden;
            left: 000px;
            width: 1800px;
            height: 1000px;
            z-index: 0;
        }
        /* video{
            left: 000px;
            width: 1800px;
            height: 1000px;
            position: sticky;
            float: left;
        } */

        .trash{
                width: 10px;
                height: 10px;
                background-color: aqua;
                position: absolute;
        }
    
        #ship{
            
            position: relative;
            rotate: 90deg;
            background-color: antiquewhite;
            
            width:150px;
            height: 70px;
            
            border-radius:  15px;
        }

        #net{
            top: 30px;
            rotate: 45deg;
            color: transparent;
            background-image: linear-gradient(to top left, #a36b6bf6 2% , transparent 10% , #a36b6bf6 15%, transparent 20%,#a36b6bf6 25%, transparent 30% );
            box-sizing: inherit;
            width: 150px;
            height: 150px;
           
            
      
            
            position: relative;
        }
        #net2{
            left: 50px;
            top:-70px;
            rotate: 45deg;
            color: transparent;
            background-image:   linear-gradient(to top right, #a36b6bf6 2% , transparent 10% , #a36b6bf6 15%, transparent 20%,#a36b6bf6 25%, transparent 30% )

                            ;
            box-sizing: inherit;
            width: 150px;
            height: 150px;

            position: relative;
        }
        #net3{
            left: -50px;
            top: -220px;
            color: transparent;
            background-image:   linear-gradient(to bottom left, #a36b6bf6 2% , transparent 10% , #a36b6bf6 15%, transparent 20%,#a36b6bf6 25%, transparent 30% );
            rotate: 45deg;
            box-sizing: inherit;
            width: 150px;
            height: 150px;

            position: relative;
        }
        #netMain{
            top: -100px;
            color: transparent;
            background-image:   linear-gradient(90deg, #a36b6bf6 2% , transparent 10% , #a36b6bf6 15%, transparent 20%,#a36b6bf6 25%, transparent 30%, #a36b6bf6 30%, transparent 30%, #a36b6bf6 40%, transparent 40%, #a36b6bf6 50%, transparent 50% , #a36b6bf6 60%, transparent 60%, #a36b6bf6 70%, transparent 70%,#a36b6bf6 80%, transparent 80%,#a36b6bf6 90%, transparent 90%,#a36b6bf6 100%, transparent 100% )
                                ,linear-gradient(180deg, #a36b6bf6 2% , transparent 10% , #a36b6bf6 15%, transparent 20%,#a36b6bf6 25%, transparent 30%, #a36b6bf6 30%, transparent 30%, #a36b6bf6 40%, transparent 40%, #a36b6bf6 50%, transparent 50% , #a36b6bf6 60%, transparent 60%, #a36b6bf6 70%, transparent 70%,#a36b6bf6 80%, transparent 80%,#a36b6bf6 90%, transparent 90% ,#a36b6bf6 100%, transparent 100% )
                            ;   
            box-sizing: inherit;
            border-radius: 15px;
            width: 150px;
            height: 150px;

            position: relative;
        }
        
        #netT{
            left:1500px;
            top:570px;

            position: absolute;
            rotate: 0deg;
            

        }
        .scuba{
            width: 10px;
            height: 10px;
            
        }
        /* img{
            box-shadow: 0 0 35px aqua;
        }*/

        .hr0{    
            border: 0px; 
            z-index: 99; 
            position: relative; 
            background-color: aqua; 
            box-shadow: 0 0 35px rgb(123, 255, 0);
        }
        .hr1{    
            width: 100%; 
            height: 5px; 
            left: 0%; 
            top: 42%; 
        }
        .hr2{
            width: 5px; 
            height: 100%; 
            left:66%; 
            top: -7.3%; 
        }
        .hr3{
            width: 5px; 
            height: 100%; 
            left: 33%; 
            top: -107.3%; 
        }

       
        .span0{
            
            
            font-family: initial;
            font-style: initial;
            font-variant: initial;
            font-stretch: initial;
            
            position: relative; 
            font-weight: bold; 
            color:aqua; 
            font-size: 80px; 
            text-shadow: 0 0 7px #fff, 0 0 10px #fff, 0 0 21px #fff, /* Green glow */ 0 0 42px #0fa, 0 0 82px #0fa, 0 0 92px #0fa, 0 0 102px #0fa, 0 0 151px #0fa;
            left: 0px; 
            top:0px; 
            z-index: 200;
        }

   


    </style>
  
</head>

<body>
   

<!-- <video src="./media/Ocean - 105322.mp4"  muted autoplay loop></video> -->
<div class="container" style="margin: 0px; padding: 0px;">
<div id="sea">      
<!-- 1800 X 1000 -->

<span class="mine span0" style="left:10%; top:9%;">Home</span>
<span class="mine span0" style="left:30.7%;top:9%;">About</span>
<span class="mine span0" style="left:46.7%; top:9%;">Diver Shop</span>
<span class="mine span0" style="left :-46.5%; top:59.5%;">Environment</span>
<span class="mine span0" style="left:38%; top:56%;">Community</span>
<span class="mine span0" style="left:53%; top:56%;">Event</span>
<hr class="mine hr0 hr1">
<hr class="mine hr0 hr2">
<hr class="mine hr0 hr3">
</div>
</div>
</body>

<script src="https://code.jquery.com/jquery-3.6.1.js"></script>
<script>
    
    let charImg = "잠수정.png";
    let randNumX = 0;
    let randNumY = 0;


    let ship = document.getElementById('netT');

    let shipRadius = 75;   // 배를 원으로 둘럿을 때 반지름 (지름150px)

    // 화면크기의 직사각형
    let bigX1 = 00;
    let bigX2 = 1800;
    let bigY1 = 00;
    let bigY2 = 1000;

    // 내부의 지나가야하는 직사각형
    let smallX1 = 300;
    let smallX2 = 1500;
    let smallY1 = 300;
    let smallY2 = 700;

    // 원의 중심이 위치하는 직사각형    (반지름은 100~250)
    let midX1 = bigX1 +200;
    let midX2 = bigX2 -200;
    let midY1 = bigY1 +200;
    let midY2 = bigY2 -200;

    //              quad 4
    //         ┌──────────────┐
    //         |              |
    //         |     ┌──┐     |
    //  quad3  |     |  |     |   quad 1
    //         |     └──┘     |
    //         |              |
    //         └──────────────┘
    //              quad 2

    // quad 1 오른쪽면 가능 범위
    let quad1Deg1 = Math.ceil(Math.atan((bigY2-smallY1)/(bigX2-smallX2))*180/Math.PI) +90;      // 135 ~
    let quad1Deg2 = Math.ceil(Math.atan((smallY2- bigY1)/(bigX2-smallX2))*180/Math.PI) +180;    // ~ 218
    
    let quad2Deg1 = Math.ceil(Math.atan((bigY2-smallY2)/(smallX2-bigX1))*180/Math.PI);          // 27 ~
    let quad2Deg2 = 180- Math.ceil(Math.atan((bigY2-smallY2)/(bigX2-smallX1))*180/Math.PI);     // ~ 155

    let quad3Deg1 = Math.ceil(Math.atan((bigY2-smallY2)/(bigY2-smallY1))*180/Math.PI);          // 0 ~ 34
    let quad3Deg2 = 360- Math.ceil(Math.atan((smallY2-bigY1)/(smallX1-bigX1))*180/Math.PI) ;    // 318 ~ 360

    let quad4Deg1 = Math.ceil(Math.atan((smallY1-bigY1)/(bigX2-smallX1))*180/Math.PI) +180;     // 198 ~ 
    let quad4Deg2 = 360- Math.ceil(Math.atan((smallY1-bigY1)/(smallX2-bigX1))*180/Math.PI);     // ~ 341
    
    let quad = 0;
    let startX = 0;
    let startY = 0;

    let count = 0;
    let shipArr = Array();

    let realDeg = 0;
    let deg = 0;
    let rotDeg = 0;



    $('body').click(function(e){
        
        for (let i = 0; i < shipArr.length; i++) {
            
            shipArr[i][15] = 0;
        }
    });


    setInterval(() => {

        deg = Math.floor(Math.random()*360);
        realDeg = deg;
        
    if(deg > 155 && deg < 198){
        quad = 1;
        startX = bigX2;
        startY = Math.floor(Math.random()*(smallY2-smallY1) + Math.round(smallY1 + (bigX2-smallX2)*(Math.tan(deg *Math.PI/180))));
    }else if(deg > 34 && deg < 135){
        quad = 2;
        startX = Math.floor(Math.random()*(smallX2-smallX1) + Math.round(smallX1 + (bigY2-smallY2)/(Math.tan(deg *Math.PI/180))));
        startY = bigY2;
        deg -= 180;
    }else if((deg >= 0 && deg < 27) || (deg > 341 && deg <= 360)){
        quad = 3;
        startX = bigX1;
        startY = Math.floor(Math.random()*(smallY2-smallY1) + Math.round(smallY1 + (smallX1-bigX1)*(-Math.tan(deg *Math.PI/180))));
       
    }else if(deg > 218 && deg < 318){
        quad = 4;
        startX = Math.floor(Math.random()*(smallX2-smallX1) + Math.round(smallX1 + (smallY1-bigY1)/(-Math.tan(deg *Math.PI/180))));
        startY = bigY1;
        deg -= 180;
    }else if(deg >= 27 && deg <= 34){
        // 3, 2
        quad =  Math.floor(Math.random()*2 +2);
        if(quad == 2){
            startX = Math.floor(Math.random()*(smallX2-smallX1) + Math.round(smallX1 + (bigY2-smallY2)/(Math.tan(deg *Math.PI/180))));
            startY = bigY2;
            deg -= 180;
        }else{  // 3
            startX = bigX1;
            startY = Math.floor(Math.random()*(smallY2-smallY1) + Math.round(smallY1 + (smallX1-bigX1)*(-Math.tan(deg *Math.PI/180))));
        }
    }else if(deg >= 135 && deg <= 155){
        // 1, 2
        quad =  Math.floor(Math.random()*2 +1);
        if(quad == 1){
            startX = bigX2;
            startY = Math.floor(Math.random()*(smallY2-smallY1) + Math.round(smallY1 + (bigX2-smallX2)*(Math.tan(deg *Math.PI/180))));
        }else{  // 2
            startX = Math.floor(Math.random()*(smallX2-smallX1) + Math.round(smallX1 + (bigY2-smallY2)/(Math.tan(deg *Math.PI/180))));
            startY = bigY2;
            deg -= 180;
        }
    }else if(deg >= 198 && deg <= 218){
        // 1, 4
        quad =  Math.floor(Math.random()*2 +1);
        if(quad == 2){  // 4
            quad = 4;
            startX = Math.floor(Math.random()*(smallX2-smallX1) + Math.round(smallX1 + (smallY1-bigY1)/(-Math.tan(deg *Math.PI/180))));
            startY = bigY1;
            deg -= 180;
        }else{  // 1
            startX = bigX2;
            startY = Math.floor(Math.random()*(smallY2-smallY1) + Math.round(smallY1 + (bigX2-smallX2)*(Math.tan(deg *Math.PI/180))));
            quad=5;
         
        }
    }else if(deg >= 318 && deg <= 341){
        // 3, 4
        quad =  Math.floor(Math.random()*2 +3);
        if(quad == 3){
            startX = bigX1;
            startY = Math.floor(Math.random()*(smallY2-smallY1) + Math.round(smallY1 + (smallX1-bigX1)*(-Math.tan(deg *Math.PI/180))));
        }else{  // 4
            startX = Math.floor(Math.random()*(smallX2-smallX1) + Math.round(smallX1 + (smallY1-bigY1)/(-Math.tan(deg *Math.PI/180))));
            startY = bigY1;
            deg -= 180;
        }
    }else{

    }
         

        // 랜덤 원 중심
        let midPointX = Math.floor(Math.random()*(midX2-midX1) + midX1);
        let midPointY = Math.floor(Math.random()*(midY2-midY1) + midY1);

        // 랜덤 각도, 랜덤 반지름
        let ranDeg = Math.floor(Math.random()*360);
        let ranRadius = Math.floor(Math.random()*(75) + 50);

        // 도착 포인트 (랜덤 원 둘레 지점)
        let arrPointX = midPointX + ranRadius*Math.cos(ranDeg*Math.PI/180);
        let arrPointY = midPointY + ranRadius*Math.sin(ranDeg*Math.PI/180);

        // 원을 도는 방향 (시계2, 반시계1)
        // (arrPointX-startX), (arrPointY-startY)   // 시작점 -> 도착점 벡터
        // (midPointX-arrPointX), (midPointY-arrPointY) // 도착점 -> 원 중심 벡터
        // -(midPointY-arrPointY) , (midPointX-arrPointX) // 랜덤 중심점을 반시계로 회전하는 벡터
        let vector1 = (arrPointX-startX)*(-(midPointY-arrPointY)) + (arrPointY-startY)*(midPointX-arrPointX);  // 도는 방향(시계방향)과의 내적값
        let vector2 =  Math.acos(vector1/(Math.pow(Math.pow((arrPointX-startX),2)+ Math.pow((arrPointY-startY),2),1/2) * ranRadius))*180/Math.PI;   // 도착 포인트와 만나는 각도
        let cirDir = 0;
        if(vector2 >= -90 && vector2 < 90){
            cirDir = 1;
        }else{
            cirDir = 2;
        }
        
        
        // 1, 0     // 0도 벡터
        deg =  -Math.acos((arrPointX-startX)/(Math.pow(Math.pow((arrPointX-startX),2)+ Math.pow((arrPointY-startY),2),1/2)))*180/Math.PI;    // →(0도) 방향부터 도착점까지 각도
        if(quad == 2 || quad == 3){
            deg = -deg;
        }
        if(quad == 2 || quad == 4){
            rotDeg = deg-180;
            if(quad == 2){
                rotDeg = 90 + (90 - rotDeg);
            }else{
                rotDeg = -90 + (-90 - rotDeg);
            }
        }else if(quad==1 || quad==3){

            rotDeg = deg;
            if(quad == 1){
                rotDeg = -180 + (-180 - rotDeg);

            }else{
                rotDeg = -deg;
                if(arrPointY > startY){
                    deg = -deg;
                    rotDeg = -deg;
                }
            }
        }else if(quad==5){
            deg = -180 + (-180 - deg);
            rotDeg = -180 + (-180 - deg);

            if(arrPointY > startY){
                deg = -180 + (-180 - deg);
                rotDeg = -180 + (-180 - deg);
            }

        }
        
       
        let goPoint = 3;
        // let goPoint = Math.floor(Math.random()*6 +1);
        
        // console.log("cirDir"+ (cirDir));    
        // console.log("startX"+ startX);
        // console.log("startY"+ startY);

        // console.log("midPointX"+ midPointX);
        // console.log("midPointY"+ midPointY);
       
        // console.log("arrPointX"+ arrPointX);
        // console.log("arrPointY"+ arrPointY);
        let first = -1;
        let speed = Math.floor(Math.random()*3 +1);
        
        
        $('body').append('<div id="netT'+count+'" class="scuba" style="left: '+ startX +'px; top: '+ startY +'px; rotate:'+(rotDeg) +'deg; position:absolute; height:50px; z-index:1;"><img style="width:150px" src="./image/'+ charImg +'" alt=""><img src="../image/444.png" style="z-index:2; width:65px; height:60px; position:relative; left:62px; top:-91px; border-radius:50%;" ></div>');

        // $('body').append('<div id="trash" class="trash" style="background-color:red; left:'+ arrPointX +'px ; top:'+arrPointY +'px; position:absolute; height:10px; width:10px;"></div>');
        // $('body').append('<div id="trash"  class="trash" style="background-color:blue; left:'+ startX +'px; top:'+startY +'px; position:absolute; height:10px; width:10px;"></div>');
        // $('body').append('<div id="trash" class="trash" style="background-color:green; left:'+ midPointX +'px; top:'+midPointY +'px; position:absolute; height:10px; width:10px;"></div>');
        // 인덱스, 각도, 시작x위치, 시작y위치, 사분면 번호, 랜덤 중심점x, 랜덤 중심점y, 랜덤반지름(100~250), 도착 포인트x, 도착 포인트y, 도는 방향(시계1, 반시계2), 돌기on/off, 도는 시간 
        shipArr.push([count, deg, startX, startY, quad, midPointX, midPointY, ranRadius, arrPointX, arrPointY, cirDir, 'off', 0, rotDeg, goPoint, first, [bigX1,bigX2,bigY1,bigY2,midX1,midX2,midY1,midY2], speed]);
        // console.log(shipArr[0][1],shipArr[0][4]);
        // console.log(shipArr[1][1],shipArr[1][4]);
        count++;

    }, 500);

{   // 오션클린업 이벤트
    
    // let trashArr = Array();
    // let trashCount = 0;
    // setInterval(() => {

    //     trashX = Math.floor(Math.random() *(bigX2-bigX1) + bigX1);
    //     trashY = Math.floor(Math.random() *(bigY2-bigY1) + bigY1);

    //     $('body').append('<div class="trash" id="trash'+ trashCount +'" style="left: ' + trashX + 'px; top:' + trashY + 'px;"></div>');
        
    //     trashArr.push([trashCount, trashX, trashY]);
    //     trashCount++; 
    // }, 10);
}

    // let speed = Math.floor(Math.random()*5 +1);
    let playSecond = 10;    // 1000 : 1초

    setInterval(() => {
            
    if(shipArr.length >= 1){

        for(let i = 0; i < shipArr.length ; i++){
            
            // [0]인덱스
            // [1]각도
            // [2]시작x위치 (현재x위치)
            // [3]시작y위치 (현재y위치)
            // [4]사분면 번호
            // [5]랜덤 중심점x
            // [6]랜덤 중심점y
            // [7]랜덤반지름(100~250)
            // [8]도착 포인트x
            // [9]도착 포인트y
            // [10]도는 방향(시계2, 반시계1)
            // [11]도는지 여부('on'(도는중), 'off'(돌지않음), 'set'(돌고나서 위아래))
            // [12]도는속도
            // [13]도는 각도
            // [14](1~6)구역 나누기
            // [15]처음 생성후 (지정x = -1) 이동(0)인지 아닌지(1)
            // [16]각 객체별 좌표구간 [bigX1,bigX2,bigY1,bigY2,midX1,midX2,midY1,midY2]
            // [17]랜덤 스피드

            if(shipArr[i][15]==1 || shipArr[i][15]==2){ // 구역이 정해졌을 때만

            if (shipArr[i][14] == 1) {
                shipArr[i][16][0] = 0;
                shipArr[i][16][1] = 600;
                shipArr[i][16][2] = 0;
                shipArr[i][16][3] = 500;
                shipArr[i][16][4] = shipArr[i][16][0] + 200;
                shipArr[i][16][5] = shipArr[i][16][1] - 200;
                shipArr[i][16][6] = shipArr[i][16][2] + 200;
                shipArr[i][16][7] = shipArr[i][16][3] - 200;
            } else if (shipArr[i][14] == 2) {
                shipArr[i][16][0] = 600;
                shipArr[i][16][1] = 1200;
                shipArr[i][16][2] = 0;
                shipArr[i][16][3] = 500;
                shipArr[i][16][4] = shipArr[i][16][0] + 200;
                shipArr[i][16][5] = shipArr[i][16][1] - 200;
                shipArr[i][16][6] = shipArr[i][16][2] + 200;
                shipArr[i][16][7] = shipArr[i][16][3] - 200;
            } else if (shipArr[i][14] == 3) {
                shipArr[i][16][0] = 1200;
                shipArr[i][16][1] = 1800;
                shipArr[i][16][2] = 0;
                shipArr[i][16][3] = 500;
                shipArr[i][16][4] = shipArr[i][16][0] + 200;
                shipArr[i][16][5] = shipArr[i][16][1] - 200;
                shipArr[i][16][6] = shipArr[i][16][2] + 200;
                shipArr[i][16][7] = shipArr[i][16][3] - 200;
            } else if (shipArr[i][14] == 4) {
                shipArr[i][16][0] = 0;
                shipArr[i][16][1] = 600;
                shipArr[i][16][2] = 500;
                shipArr[i][16][3] = 1000;
                shipArr[i][16][4] = shipArr[i][16][0] + 200;
                shipArr[i][16][5] = shipArr[i][16][1] - 200;
                shipArr[i][16][6] = shipArr[i][16][2] + 200;
                shipArr[i][16][7] = shipArr[i][16][3] - 200;
            } else if (shipArr[i][14] == 5) {
                shipArr[i][16][0] = 600;
                shipArr[i][16][1] = 1200;
                shipArr[i][16][2] = 500;
                shipArr[i][16][3] = 1000;
                shipArr[i][16][4] = shipArr[i][16][0] + 200;
                shipArr[i][16][5] = shipArr[i][16][1] - 200;
                shipArr[i][16][6] = shipArr[i][16][2] + 200;
                shipArr[i][16][7] = shipArr[i][16][3] - 200;
            } else {
                shipArr[i][16][0] = 1200;
                shipArr[i][16][1] = 1800;
                shipArr[i][16][2] = 500;
                shipArr[i][16][3] = 1000;
                shipArr[i][16][4] = shipArr[i][16][0] + 200;
                shipArr[i][16][5] = shipArr[i][16][1] - 200;
                shipArr[i][16][6] = shipArr[i][16][2] + 200;
                shipArr[i][16][7] = shipArr[i][16][3] - 200;
            }

        }
            

            // 도는중에 한바퀴 돈 후 시점 or 밖으로 나갔을 때
            if(shipArr[i][11] == 'on' || shipArr[i][2] < shipArr[i][16][0] || shipArr[i][2] > shipArr[i][16][1] || shipArr[i][3] > shipArr[i][16][3] || shipArr[i][3] < shipArr[i][16][2] ){
                if(shipArr[i][12] >= 2*Math.PI*shipArr[i][7] || shipArr[i][2] < shipArr[i][16][0] || shipArr[i][2] > shipArr[i][16][1] || shipArr[i][3] > shipArr[i][16][3] || shipArr[i][3] < shipArr[i][16][2]){
                    shipArr[i][11] ='off';
                    
                    
                    // 랜덤 원 중심
                    let midPointX = Math.floor(Math.random()*(shipArr[i][16][5]-shipArr[i][16][4]) + shipArr[i][16][4]);
                    let midPointY = Math.floor(Math.random()*(shipArr[i][16][7]-shipArr[i][16][6]) + shipArr[i][16][6]);

                    // 랜덤 각도, 랜덤 반지름
                    let ranDeg = Math.floor(Math.random() * 360);
                    let ranRadius = Math.floor(Math.random() * (75) + 50);

                    // 도착 포인트 (랜덤 원 둘레 지점)
                    let arrPointX = midPointX + ranRadius * Math.cos(ranDeg * Math.PI / 180);
                    let arrPointY = midPointY + ranRadius * Math.sin(ranDeg * Math.PI / 180);

                    // 원을 도는 방향 (시계2, 반시계1)
                    let vector1 = (arrPointX - shipArr[i][2]) * (-(midPointY - arrPointY)) + (arrPointY - shipArr[i][3]) * (midPointX - arrPointX);  
                    let vector2 = Math.acos(vector1 / (Math.pow(Math.pow((arrPointX - shipArr[i][2]), 2) + Math.pow((arrPointY - shipArr[i][3]), 2), 1 / 2) * ranRadius)) * 180 / Math.PI;
                    let cirDir = 0;
                    if (vector2 >= -90 && vector2 < 90) {
                        cirDir = 1;
                    } else {
                        cirDir = 2;
                    }
                    // 1, 0     // 0도 벡터
                    let deg00 = -Math.acos((arrPointX - shipArr[i][2]) / (Math.pow(Math.pow((arrPointX - shipArr[i][2]), 2) + Math.pow((arrPointY - shipArr[i][3]), 2), 1 / 2))) * 180 / Math.PI;
                   
                    if(arrPointX < shipArr[i][2] && arrPointY < shipArr[i][3]){
                        deg00 = -deg00;
                    }else if(arrPointX > shipArr[i][2] && arrPointY < shipArr[i][3]){
                        deg00 = -deg00;
                    }
              
                    

                    if(shipArr[i][15]==0){  // 처음 안치
                        shipArr[i][17] = Math.floor(Math.random()*5 +1);
                        shipArr[i][13] = -deg00;
                    }else if(shipArr[i][15]==2){    // 구역이동완료
                        shipArr[i][13] = -deg00;
                        shipArr[i][17] = Math.floor(Math.random()*1 +1);
                    }else if(shipArr[i][15]==1){
                        shipArr[i][13] = -deg00;
                        shipArr[i][15] = 3; // 이동 방향 지정 완료
                        shipArr[i][17] = Math.floor(Math.random()*2 +3);
                    }else if(shipArr[i][15]==3){
                        // 이동방향 지정 후엔 방향바뀌지않음
                    }else{  // -1일때 
                        shipArr[i][17] = Math.floor(Math.random()*3 +1);
                        shipArr[i][13] = -deg00;
                    }
                    
                    
                  

                    shipArr[i][1] = deg00;
                    shipArr[i][5] = midPointX; 
                    shipArr[i][6] = midPointY;
                    shipArr[i][7] = ranRadius;
                    shipArr[i][8] = arrPointX;
                    shipArr[i][9] = arrPointY;
                    shipArr[i][10] = cirDir;
                    shipArr[i][12] = 0;
                    // shipArr[i][17] = Math.floor(Math.random()*2 +1);
                    
                    // $('body').append('<div id="trash" class="trash" style="background-color:red; left:'+ arrPointX +'px ; top:'+arrPointY +'px; position:absolute; height:10px; width:10px;"></div>');
                    // $('body').append('<div id="trash"  class="trash" style="background-color:blue; left:'+ shipArr[i][2] +'px; top:'+shipArr[i][3] +'px; position:absolute; height:10px; width:10px;"></div>');
                    // $('body').append('<div id="trash" class="trash" style="background-color:green; left:'+ midPointX +'px; top:'+midPointY +'px; position:absolute; height:10px; width:10px;"></div>');
                }
            }

            // 지점 도착
            if(shipArr[i][11] == 'off' && shipArr[i][2] >= shipArr[i][8]-30 && shipArr[i][2] <= shipArr[i][8]+30 && shipArr[i][3] >= shipArr[i][9]-30 && shipArr[i][3] <= shipArr[i][9]+30){
                shipArr[i][11] = 'on';
            
                if(shipArr[i][15] == 3){
                    shipArr[i][17] = Math.floor(Math.random()*2 +1);
                    shipArr[i][15]=2;
                    // 구역 이동완료
                }
                if(shipArr[i][15] == 0){
                    shipArr[i][15]=1;
                    // 이동 중
                }
                
            }
            
            if(shipArr[i][11] == 'on'){ // 도는중
                shipArr[i][17] = Math.floor(Math.random()*2 +1);

                if(shipArr[i][10] == 1){    // 반시계
                    shipArr[i][2] += (shipArr[i][17]/shipArr[i][7])*(-(shipArr[i][6]-shipArr[i][3]));
                    shipArr[i][3] += (shipArr[i][17]/shipArr[i][7])*(shipArr[i][5]-shipArr[i][2]);
                    
                    if(shipArr[i][5]-shipArr[i][2] <= 0){   // 내적으로 각도구하는 법은 모든 상황의 각도를 가져오지못함(조건식으로 해결)
                        shipArr[i][13] = -Math.acos((-(shipArr[i][6]-shipArr[i][3])) / (Math.pow(Math.pow((-(shipArr[i][6]-shipArr[i][3])), 2) + Math.pow((shipArr[i][5]-shipArr[i][2]), 2), 1 / 2))) * (180 / Math.PI);
                    }else{
                        shipArr[i][13] = Math.acos((-(shipArr[i][6]-shipArr[i][3])) / (Math.pow(Math.pow((-(shipArr[i][6]-shipArr[i][3])), 2) + Math.pow((shipArr[i][5]-shipArr[i][2]), 2), 1 / 2))) * (180 / Math.PI);
                    }
                    
                    

                }else{    // 시계
                    shipArr[i][2] += (shipArr[i][17]/shipArr[i][7])*(shipArr[i][6]-shipArr[i][3]);
                    shipArr[i][3] += (shipArr[i][17]/shipArr[i][7])*(-(shipArr[i][5]-shipArr[i][2]));

                    if(-(shipArr[i][5]-shipArr[i][2]) <= 0){
                        shipArr[i][13] = -Math.acos((shipArr[i][6]-shipArr[i][3]) / (Math.pow(Math.pow((shipArr[i][6]-shipArr[i][3]), 2) + Math.pow((-(shipArr[i][5]-shipArr[i][2])), 2), 1 / 2))) * (180 / Math.PI);
                    }else{
                        shipArr[i][13] = Math.acos((shipArr[i][6]-shipArr[i][3]) / (Math.pow(Math.pow((shipArr[i][6]-shipArr[i][3]), 2) + Math.pow((-(shipArr[i][5]-shipArr[i][2])), 2), 1 / 2))) * (180 / Math.PI);
                    }
                    
                
                }
                shipArr[i][12] += shipArr[i][17];
             
            }else if(shipArr[i][11] == 'off'){  // 돌기전 지점 이동
                shipArr[i][2] += shipArr[i][17]*Math.sin((shipArr[i][1]+90)*Math.PI/180);
                shipArr[i][3] += shipArr[i][17]*Math.cos((shipArr[i][1]+90)*Math.PI/180);
            }else{

            }

         


            // 새로운 지점 목표로 지정중 상하이동 상태
            // if(shipArr[i][11] == 'set'){
            //     if(shipArr[i][12] < 30){
            //         shipArr[i][3] -= speed; 
            //         shipArr[i][12] += 1;
                    
            //     }else if(shipArr[i][12] < 60){
            //         shipArr[i][3] += speed; 
            //         shipArr[i][12] += 1;
            //     }else{
            //         shipArr[i][11] = 'off';
            //     }
            // }



            $('#netT'+shipArr[i][0]).css('left', shipArr[i][2] + 'px');
            $('#netT'+shipArr[i][0]).css('top', shipArr[i][3] + 'px');
            $('#netT'+shipArr[i][0]).css('rotate', (shipArr[i][13]) + 'deg');

            {   // 오션클린업 이벤트
            // if(trashArr.length >= 1){
            //     for (let j = 0; j < trashArr.length; j++) {
            //         let trashRange = Math.pow((trashArr[j][1] - shipArr[i][2] - 50), 2) + Math.pow((trashArr[j][2] - shipArr[i][3] - 100), 2);
                    
            //         if (trashRange <= Math.pow(shipRadius, 2)) {
            //             $('#trash' + trashArr[j][0]).remove();
            //             trashArr.splice(j,1);
            //             j=0;
                        
            //         }
            //     }
            // }
            }
            {   // 화면 끝 도달 시 삭제 메소드
            // if(shipArr[i][4] == 1){
            //     if (bigX1 > shipArr[i][2]){
            //         $('#netT'+shipArr[i][0]).remove();
            //         shipArr.splice(i,1);
            //         break;
            //     }
            // }else if(shipArr[i][4] == 2){
            //     if (bigY1 > shipArr[i][3]){
            //         $('#netT'+shipArr[i][0]).remove();
            //         shipArr.splice(i,1);
            //         break;
            //     }
            // }else if(shipArr[i][4] == 3){
            //     if (bigX2 < shipArr[i][2]){
            //         $('#netT'+shipArr[i][0]).remove();
            //         shipArr.splice(i,1);
            //         break;
            //     }
            // }else{
            //     if (bigY2 < shipArr[i][3]){
            //         $('#netT'+shipArr[i][0]).remove();
            //         shipArr.splice(i,1);
            //         break;
            //     }
            // }
        }
        }
    }


    }, playSecond);




</script>

</html>